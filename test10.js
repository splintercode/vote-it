window.LOADING_FINISHED(function() { (function(){(function(){var n,t,r,i;(function(){var u={},f={};n=function(n,t,i){u[n]={deps:t,callback:i}};i=r=t=function(n){function v(t){var f,i,r,e,u;if(t.charAt(0)!==".")return t;for(f=t.split("/"),i=n.split("/").slice(0,-1),r=0,e=f.length;r<e;r++)if(u=f[r],u==="..")i.pop();else if(u===".")continue;else i.push(u);return i.join("/")}var r,c,l;if(i._eak_seen=u,f[n])return f[n];if(f[n]={},!u[n])throw new Error("Could not find module "+n);var s=u[n],e=s.deps,a=s.callback,o=[],h;for(r=0,c=e.length;r<c;r++)e[r]==="exports"?o.push(h={}):o.push(t(v(e[r])));return l=a.apply(this,o),f[n]=h||l}})();n("promise/all",["./utils","exports"],function(n,t){"use strict";function u(n){var t=this;if(!i(n))throw new TypeError("You must pass an array to all.");return new t(function(t,i){function h(n){return function(t){s(n,t)}}function s(n,i){e[n]=i;--o==0&&t(e)}var e=[],o=n.length,f,u;for(o===0&&t([]),u=0;u<n.length;u++)f=n[u],f&&r(f.then)?f.then(h(u),i):s(u,f)})}var i=n.isArray,r=n.isFunction;t.all=u});n("promise/asap",["exports"],function(n){"use strict";function o(){return function(){process.nextTick(i)}}function s(){var n=0,r=new u(i),t=document.createTextNode("");return r.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function h(){return function(){e.setTimeout(i,1)}}function i(){for(var n=0;n<t.length;n++){var i=t[n],r=i[0],u=i[1];r(u)}t=[]}function c(n,i){var r=t.push([n,i]);r===1&&f()}var r=typeof window!="undefined"?window:{},u=r.MutationObserver||r.WebKitMutationObserver,e=typeof global!="undefined"?global:this===undefined?window:this,t=[],f;f=typeof process!="undefined"&&{}.toString.call(process)==="[object process]"?o():u?s():h();n.asap=c});n("promise/config",["exports"],function(n){"use strict";function i(n,i){if(arguments.length===2)t[n]=i;else return t[n]}var t={instrument:!1};n.config=t;n.configure=i});n("promise/polyfill",["./promise","./utils","exports"],function(n,t,i){"use strict";function f(){var n,t;n=typeof global!="undefined"?global:typeof window!="undefined"&&window.document?window:self;t="Promise"in n&&"resolve"in n.Promise&&"reject"in n.Promise&&"all"in n.Promise&&"race"in n.Promise&&function(){var t;return new n.Promise(function(n){t=n}),u(t)}();t||(n.Promise=r)}var r=n.Promise,u=t.isFunction;i.polyfill=f});n("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(n,t,i,r,u,f,e,o){"use strict";function s(n){if(!a(n))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof s))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[];et(n,this)}function et(n,t){function r(n){l(t,n)}function i(n){h(t,n)}try{n(r,i)}catch(u){i(u)}}function w(n,t,i,r){var e=a(i),u,o,f,s;if(e)try{u=i(r);f=!0}catch(c){s=!0;o=c}else u=r,f=!0;g(t,u)||(e&&f?l(t,u):s?h(t,o):n===v?l(t,u):n===y&&h(t,u))}function ot(n,t,i,r){var u=n._subscribers,f=u.length;u[f]=t;u[f+v]=i;u[f+y]=r}function d(n,t){for(var u,f,r=n._subscribers,e=n._detail,i=0;i<r.length;i+=3)u=r[i],f=r[i+t],w(t,u,f,e);n._subscribers=null}function g(n,t){var r=null,i;try{if(n===t)throw new TypeError("A promises callback cannot return that same promise.");if(nt(t)&&(r=t.then,a(r)))return r.call(t,function(r){if(i)return!0;i=!0;t!==r?l(n,r):p(n,r)},function(t){if(i)return!0;i=!0;h(n,t)}),!0}catch(u){return i?!0:(h(n,u),!0)}return!1}function l(n,t){n===t?p(n,t):g(n,t)||p(n,t)}function p(n,t){n._state===b&&(n._state=k,n._detail=t,c.async(st,n))}function h(n,t){n._state===b&&(n._state=k,n._detail=t,c.async(ht,n))}function st(n){d(n,n._state=v)}function ht(n){d(n,n._state=y)}var c=n.config,ct=n.configure,nt=t.objectOrFunction,a=t.isFunction,lt=t.now,tt=i.all,it=r.race,rt=u.resolve,ut=f.reject,ft=e.asap;c.async=ft;var b=void 0,k=0,v=1,y=2;s.prototype={constructor:s,_state:undefined,_detail:undefined,_subscribers:undefined,then:function(n,t){var i=this,r=new this.constructor(function(){}),u;return this._state?(u=arguments,c.async(function(){w(i._state,r,u[i._state-1],i._detail)})):ot(this,r,n,t),r},"catch":function(n){return this.then(null,n)}};s.all=tt;s.race=it;s.resolve=rt;s.reject=ut;o.Promise=s});n("promise/race",["./utils","exports"],function(n,t){"use strict";function r(n){var t=this;if(!i(n))throw new TypeError("You must pass an array to race.");return new t(function(t,i){for(var r,u=0;u<n.length;u++)r=n[u],r&&typeof r.then=="function"?r.then(t,i):t(r)})}var i=n.isArray;t.race=r});n("promise/reject",["exports"],function(n){"use strict";function t(n){var t=this;return new t(function(t,i){i(n)})}n.reject=t});n("promise/resolve",["exports"],function(n){"use strict";function t(n){if(n&&typeof n=="object"&&n.constructor===this)return n;var t=this;return new t(function(t){t(n)})}n.resolve=t});n("promise/utils",["exports"],function(n){"use strict";function i(n){return t(n)||typeof n=="object"&&n!==null}function t(n){return typeof n=="function"}function r(n){return Object.prototype.toString.call(n)==="[object Array]"}var u=Date.now||function(){return(new Date).getTime()};n.objectOrFunction=i;n.isFunction=t;n.isArray=r;n.now=u});t("promise/polyfill").polyfill()})(),function(){"use strict";function k(n,i){var w="",b,f,k;if(n&&(w=n.toString()),n&&(n.toString()==="[object ArrayBuffer]"||n.buffer&&n.buffer.toString()==="[object ArrayBuffer]"))f=t,n instanceof ArrayBuffer?(b=n,f+=r):(b=n.buffer,w==="[object Int8Array]"?f+=o:w==="[object Uint8Array]"?f+=s:w==="[object Uint8ClampedArray]"?f+=h:w==="[object Int16Array]"?f+=c:w==="[object Uint16Array]"?f+=a:w==="[object Int32Array]"?f+=l:w==="[object Uint32Array]"?f+=v:w==="[object Float32Array]"?f+=y:w==="[object Float64Array]"?f+=p:i(new Error("Failed to get type for BinaryArray"))),i(f+u(b));else if(w==="[object Blob]")k=new FileReader,k.onload=function(){var n=u(this.result);i(t+e+n)},k.readAsArrayBuffer(n);else try{i(JSON.stringify(n))}catch(d){window.console.error("Couldn't convert value into a JSON string: ",n);i(null,d)}}function d(n){if(n.substring(0,i)!==t)return JSON.parse(n);var k=n.substring(w),f=n.substring(i,w),u=b(k);switch(f){case r:return u;case e:return new Blob([u]);case o:return new Int8Array(u);case s:return new Uint8Array(u);case h:return new Uint8ClampedArray(u);case c:return new Int16Array(u);case a:return new Uint16Array(u);case l:return new Int32Array(u);case v:return new Uint32Array(u);case y:return new Float32Array(u);case p:return new Float64Array(u);default:throw new Error("Unkown type: "+f);}}function b(t){var u=t.length*.75,l=t.length,i,f=0,h,e,o,c,s,r;for(t[t.length-1]==="="&&(u--,t[t.length-2]==="="&&u--),s=new ArrayBuffer(u),r=new Uint8Array(s),i=0;i<l;i+=4)h=n.indexOf(t[i]),e=n.indexOf(t[i+1]),o=n.indexOf(t[i+2]),c=n.indexOf(t[i+3]),r[f++]=h<<2|e>>4,r[f++]=(e&15)<<4|o>>2,r[f++]=(o&3)<<6|c&63;return s}function u(t){for(var r=new Uint8Array(t),i="",u=0;u<r.length;u+=3)i+=n[r[u]>>2],i+=n[(r[u]&3)<<4|r[u+1]>>4],i+=n[(r[u+1]&15)<<2|r[u+2]>>6],i+=n[r[u+2]&63];return r.length%3==2?i=i.substring(0,i.length-1)+"=":r.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="__lfsc__:",i=t.length,r="arbf",e="blob",o="si08",s="ui08",h="uic8",c="si16",l="si32",a="ur16",v="ui32",y="fl32",p="fl64",w=i+r.length,f={serialize:k,deserialize:d,stringToBuffer:b,bufferToString:u};typeof module!="undefined"&&module.exports?module.exports=f:typeof define=="function"&&define.amd?define("localforageSerializer",function(){return f}):this.localforageSerializer=f}.call(window),function(){"use strict";function f(t){var f=this,i={db:null},u;if(t)for(u in t)i[u]=t[u];return new n(function(n,t){var u=r.open(i.name,i.version);u.onerror=function(){t(u.error)};u.onupgradeneeded=function(){u.result.createObjectStore(i.storeName)};u.onsuccess=function(){i.db=u.result;f._dbInfo=i;n()}})}function e(i,r){var f=this,u;return typeof i!="string"&&(window.console.warn(i+" used as a key, but it is not a string."),i=String(i)),u=new n(function(n,t){f.ready().then(function(){var u=f._dbInfo,e=u.db.transaction(u.storeName,"readonly").objectStore(u.storeName),r=e.get(i);r.onsuccess=function(){var t=r.result;t===undefined&&(t=null);n(t)};r.onerror=function(){t(r.error)}})["catch"](t)}),t(u,r),u}function o(i,r){var u=this,f=new n(function(n,t){u.ready().then(function(){var f=u._dbInfo,e=f.db.transaction(f.storeName,"readonly").objectStore(f.storeName),r=e.openCursor(),o=1;r.onsuccess=function(){var t=r.result,u;t?(u=i(t.value,t.key,o++),u!==void 0?n(u):t["continue"]()):n()};r.onerror=function(){t(r.error)}})["catch"](t)});return t(f,r),f}function s(i,r,u){var e=this,f;return typeof i!="string"&&(window.console.warn(i+" used as a key, but it is not a string."),i=String(i)),f=new n(function(n,t){e.ready().then(function(){var f=e._dbInfo,u=f.db.transaction(f.storeName,"readwrite"),s=u.objectStore(f.storeName),o;r===null&&(r=undefined);o=s.put(r,i);u.oncomplete=function(){r===undefined&&(r=null);n(r)};u.onabort=u.onerror=function(){t(o.error)}})["catch"](t)}),t(f,u),f}function h(i,r){var f=this,u;return typeof i!="string"&&(window.console.warn(i+" used as a key, but it is not a string."),i=String(i)),u=new n(function(n,t){f.ready().then(function(){var u=f._dbInfo,r=u.db.transaction(u.storeName,"readwrite"),e=r.objectStore(u.storeName),o=e["delete"](i);r.oncomplete=function(){n()};r.onerror=function(){t(o.error)};r.onabort=function(n){var i=n.target.error;i==="QuotaExceededError"&&t(i)}})["catch"](t)}),t(u,r),u}function c(i){var r=this,u=new n(function(n,t){r.ready().then(function(){var u=r._dbInfo,i=u.db.transaction(u.storeName,"readwrite"),f=i.objectStore(u.storeName),e=f.clear();i.oncomplete=function(){n()};i.onabort=i.onerror=function(){t(e.error)}})["catch"](t)});return t(u,i),u}function l(t){var i=this,r=new n(function(n,t){i.ready().then(function(){var u=i._dbInfo,f=u.db.transaction(u.storeName,"readonly").objectStore(u.storeName),r=f.count();r.onsuccess=function(){n(r.result)};r.onerror=function(){t(r.error)}})["catch"](t)});return u(r,t),r}function a(t,i){var r=this,f=new n(function(n,i){if(t<0){n(null);return}r.ready().then(function(){var f=r._dbInfo,o=f.db.transaction(f.storeName,"readonly").objectStore(f.storeName),e=!1,u=o.openCursor();u.onsuccess=function(){var i=u.result;if(!i){n(null);return}t===0?n(i.key):e?n(i.key):(e=!0,i.advance(t))};u.onerror=function(){i(u.error)}})["catch"](i)});return u(f,i),f}function v(t){var i=this,r=new n(function(n,t){i.ready().then(function(){var u=i._dbInfo,e=u.db.transaction(u.storeName,"readonly").objectStore(u.storeName),r=e.openCursor(),f=[];r.onsuccess=function(){var t=r.result;if(!t){n(f);return}f.push(t.key);t["continue"]()};r.onerror=function(){t(r.error)}})["catch"](t)});return u(r,t),r}function u(n,t){t&&n.then(function(n){t(null,n)},function(n){t(n)})}function t(n,t){t&&n.then(function(n){y(t,n)},function(n){t(n)})}function y(n,t){if(n)return setTimeout(function(){return n(null,t)},0)}var n=typeof module!="undefined"&&module.exports?require("promise"):this.Promise,r=r||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB,i;r&&(i={_driver:"asyncStorage",_initStorage:f,iterate:o,getItem:e,setItem:s,removeItem:h,clear:c,length:l,key:a,keys:v},typeof module!="undefined"&&module.exports?module.exports=i:typeof define=="function"&&define.amd?define("asyncStorage",function(){return i}):this.asyncStorage=i)}.call(window),function(){"use strict";function s(n){var h=this,i={},f,s;if(n)for(f in n)i[f]=n[f];return i.keyPrefix=i.name+"/",h._dbInfo=i,s=new e(function(n){r===t.DEFINE?require(["localforageSerializer"],n):r===t.EXPORT?n(require("./../utils/serializer")):n(o.localforageSerializer)}),s.then(function(n){return u=n,e.resolve()})}function h(t){var r=this,u=r.ready().then(function(){for(var i,u=r._dbInfo.keyPrefix,t=n.length-1;t>=0;t--)i=n.key(t),i.indexOf(u)===0&&n.removeItem(i)});return i(u,t),u}function c(t,r){var e=this,f;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),f=e.ready().then(function(){var r=e._dbInfo,i=n.getItem(r.keyPrefix+t);return i&&(i=u.deserialize(i)),i}),i(f,r),f}function l(t,r){var f=this,e=f.ready().then(function(){for(var e,i,o=f._dbInfo.keyPrefix,s=o.length,h=n.length,r=0;r<h;r++)if(e=n.key(r),i=n.getItem(e),i&&(i=u.deserialize(i)),i=t(i,e.substring(s),r+1),i!==void 0)return i});return i(e,r),e}function a(t,r){var u=this,f=u.ready().then(function(){var r=u._dbInfo,i;try{i=n.key(t)}catch(f){i=null}return i&&(i=i.substring(r.keyPrefix.length)),i});return i(f,r),f}function v(t){var r=this,u=r.ready().then(function(){for(var i=r._dbInfo,f=n.length,u=[],t=0;t<f;t++)n.key(t).indexOf(i.keyPrefix)===0&&u.push(n.key(t).substring(i.keyPrefix.length));return u});return i(u,t),u}function y(n){var r=this,t=r.keys().then(function(n){return n.length});return i(t,n),t}function p(t,r){var f=this,u;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),u=f.ready().then(function(){var i=f._dbInfo;n.removeItem(i.keyPrefix+t)}),i(u,r),u}function w(t,r,f){var s=this,o;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),o=s.ready().then(function(){r===undefined&&(r=null);var i=r;return new e(function(f,e){u.serialize(r,function(r,u){if(u)e(u);else try{var h=s._dbInfo;n.setItem(h.keyPrefix+t,r);f(i)}catch(o){(o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e(o);e(o)}})})}),i(o,f),o}function i(n,t){t&&n.then(function(n){t(null,n)},function(n){t(n)})}var e=typeof module!="undefined"&&module.exports?require("promise"):this.Promise,o=this,u=null,n=null,t,r,f;try{if(!this.localStorage||!("setItem"in this.localStorage))return;n=this.localStorage}catch(b){return}t={DEFINE:1,EXPORT:2,WINDOW:3};r=t.WINDOW;typeof module!="undefined"&&module.exports?r=t.EXPORT:typeof define=="function"&&define.amd&&(r=t.DEFINE);f={_driver:"localStorageWrapper",_initStorage:s,iterate:l,getItem:c,setItem:w,removeItem:p,clear:h,length:y,key:a,keys:v};r===t.EXPORT?module.exports=f:r===t.DEFINE?define("localStorageWrapper",function(){return f}):this.localStorageWrapper=f}.call(window),function(){"use strict";function s(i){var h=this,f={db:null},s,c,l;if(i)for(s in i)f[s]=typeof i[s]!="string"?i[s].toString():i[s];return c=new n(function(n){r===t.DEFINE?require(["localforageSerializer"],n):r===t.EXPORT?n(require("./../utils/serializer")):n(o.localforageSerializer)}),l=new n(function(n,t){try{f.db=e(f.name,String(f.version),f.description,f.size)}catch(r){return h.setDriver(h.LOCALSTORAGE).then(function(){return h._initStorage(i)}).then(n)["catch"](t)}f.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+f.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){h._dbInfo=f;n()},function(n,i){t(i)})})}),c.then(function(n){return u=n,l})}function h(t,r){var e=this,f;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),f=new n(function(n,i){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(f){f.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(t,i){var r=i.rows.length?i.rows.item(0).value:null;r&&(r=u.deserialize(r));n(r)},function(n,t){i(t)})})})["catch"](i)}),i(f,r),f}function c(t,r){var f=this,e=new n(function(n,i){f.ready().then(function(){var r=f._dbInfo;r.db.transaction(function(f){f.executeSql("SELECT * FROM "+r.storeName,[],function(i,r){for(var o,f,s=r.rows,h=s.length,e=0;e<h;e++)if(o=s.item(e),f=o.value,f&&(f=u.deserialize(f)),f=t(f,o.key,e+1),f!==void 0){n(f);return}n()},function(n,t){i(t)})})})["catch"](i)});return i(e,r),e}function l(t,r,f){var o=this,e;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),e=new n(function(n,i){o.ready().then(function(){r===undefined&&(r=null);var f=r;u.serialize(r,function(r,u){if(u)i(u);else{var e=o._dbInfo;e.db.transaction(function(u){u.executeSql("INSERT OR REPLACE INTO "+e.storeName+" (key, value) VALUES (?, ?)",[t,r],function(){n(f)},function(n,t){i(t)})},function(n){n.code===n.QUOTA_ERR&&i(n)})}})})["catch"](i)}),i(e,f),e}function a(t,r){var f=this,u;return typeof t!="string"&&(window.console.warn(t+" used as a key, but it is not a string."),t=String(t)),u=new n(function(n,i){f.ready().then(function(){var r=f._dbInfo;r.db.transaction(function(u){u.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[t],function(){n()},function(n,t){i(t)})})})["catch"](i)}),i(u,r),u}function v(t){var r=this,u=new n(function(n,t){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("DELETE FROM "+i.storeName,[],function(){n()},function(n,i){t(i)})})})["catch"](t)});return i(u,t),u}function y(t){var r=this,u=new n(function(n,t){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],function(t,i){var r=i.rows.item(0).c;n(r)},function(n,i){t(i)})})})["catch"](t)});return i(u,t),u}function p(t,r){var u=this,f=new n(function(n,i){u.ready().then(function(){var r=u._dbInfo;r.db.transaction(function(u){u.executeSql("SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,i){var r=i.rows.length?i.rows.item(0).key:null;n(r)},function(n,t){i(t)})})})["catch"](i)});return i(f,r),f}function w(t){var r=this,u=new n(function(n,t){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("SELECT key FROM "+i.storeName,[],function(t,i){for(var u=[],r=0;r<i.rows.length;r++)u.push(i.rows.item(r).key);n(u)},function(n,i){t(i)})})})["catch"](t)});return i(u,t),u}function i(n,t){t&&n.then(function(n){t(null,n)},function(n){t(n)})}var n=typeof module!="undefined"&&module.exports?require("promise"):this.Promise,o=this,u=null,e=this.openDatabase,t,r,f;e&&(t={DEFINE:1,EXPORT:2,WINDOW:3},r=t.WINDOW,typeof module!="undefined"&&module.exports?r=t.EXPORT:typeof define=="function"&&define.amd&&(r=t.DEFINE),f={_driver:"webSQLStorage",_initStorage:s,iterate:c,getItem:h,setItem:l,removeItem:a,clear:v,length:y,key:p,keys:w},r===t.DEFINE?define("webSQLStorage",function(){return f}):r===t.EXPORT?module.exports=f:this.webSQLStorage=f)}.call(window),function(){"use strict";function p(n,t){n[t]=function(){var i=arguments;return n.ready().then(function(){return n[t].apply(n,i)})}}function c(){for(var n,t,i=1;i<arguments.length;i++)if(n=arguments[i],n)for(t in n)n.hasOwnProperty(t)&&(arguments[0][t]=h(n[t])?n[t].slice():n[t]);return arguments[0]}function l(n){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n)return!0;return!1}function n(n){this._config=c({},y,n);this._driverSet=null;this._ready=!1;this._dbInfo=null;for(var t=0;t<o.length;t++)p(this,o[t]);this.setDriver(this._config.driver)}var i=typeof module!="undefined"&&module.exports?require("promise"):this.Promise,e={},t={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},v=[t.INDEXEDDB,t.WEBSQL,t.LOCALSTORAGE],o=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],r={DEFINE:1,EXPORT:2,WINDOW:3},y={description:"",driver:v.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},u=r.WINDOW,s,h,a,f;typeof module!="undefined"&&module.exports?u=r.EXPORT:typeof define=="function"&&define.amd&&(u=r.DEFINE);s=function(n){var r=r||n.indexedDB||n.webkitIndexedDB||n.mozIndexedDB||n.OIndexedDB||n.msIndexedDB,i={};return i[t.WEBSQL]=!!n.openDatabase,i[t.INDEXEDDB]=!!function(){if(typeof n.openDatabase!="undefined"&&n.navigator&&n.navigator.userAgent&&/Safari/.test(n.navigator.userAgent)&&!/Chrome/.test(n.navigator.userAgent))return!1;try{return r&&typeof r.open=="function"&&typeof n.IDBKeyRange!="undefined"}catch(t){return!1}}(),i[t.LOCALSTORAGE]=!!function(){try{return n.localStorage&&"setItem"in n.localStorage&&n.localStorage.setItem}catch(t){return!1}}(),i}(this);h=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};a=this;n.prototype.INDEXEDDB=t.INDEXEDDB;n.prototype.LOCALSTORAGE=t.LOCALSTORAGE;n.prototype.WEBSQL=t.WEBSQL;n.prototype.config=function(n){if(typeof n=="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in n)t==="storeName"&&(n[t]=n[t].replace(/\W/g,"_")),this._config[t]=n[t];return"driver"in n&&n.driver&&this.setDriver(this._config.driver),!0}return typeof n=="string"?this._config[n]:this._config};n.prototype.defineDriver=function(n,t,r){var u=new i(function(t,r){var h,u,f,c;try{var a=n._driver,v=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),y=new Error("Custom driver name already in use: "+n._driver);if(!n._driver){r(v);return}if(l(n._driver)){r(y);return}for(h=o.concat("_initStorage"),u=0;u<h.length;u++)if(f=h[u],!f||!n[f]||typeof n[f]!="function"){r(v);return}c=i.resolve(!0);"_support"in n&&(c=n._support&&typeof n._support=="function"?n._support():i.resolve(!!n._support));c.then(function(i){s[a]=i;e[a]=n;t()},r)}catch(p){r(p)}});return u.then(t,r),u};n.prototype.driver=function(){return this._driver||null};n.prototype.ready=function(n){var t=this,r=new i(function(n,i){t._driverSet.then(function(){t._ready===null&&(t._ready=t._initStorage(t._config));t._ready.then(n,i)})["catch"](i)});return r.then(n,n),r};n.prototype.setDriver=function(n,t,f){function s(){o._config.driver=o.driver()}var o=this;return typeof n=="string"&&(n=[n]),this._driverSet=new i(function(t,f){var s=o._getFirstSupportedDriver(n),h=new Error("No available storage method found."),c;if(!s){o._driverSet=i.reject(h);f(h);return}if(o._dbInfo=null,o._ready=null,l(s)){if(u===r.DEFINE){require([s],function(n){o._extend(n);t()});return}if(u===r.EXPORT){switch(s){case o.INDEXEDDB:c=require("./drivers/indexeddb");break;case o.LOCALSTORAGE:c=require("./drivers/localstorage");break;case o.WEBSQL:c=require("./drivers/websql")}o._extend(c)}else o._extend(a[s])}else if(e[s])o._extend(e[s]);else{o._driverSet=i.reject(h);f(h);return}t()}),this._driverSet.then(s,s),this._driverSet.then(t,f),this._driverSet};n.prototype.supports=function(n){return!!s[n]};n.prototype._extend=function(n){c(this,n)};n.prototype._getFirstSupportedDriver=function(n){var t,i;if(n&&h(n))for(t=0;t<n.length;t++)if(i=n[t],this.supports(i))return i;return null};n.prototype.createInstance=function(t){return new n(t)};f=new n;u===r.DEFINE?define("localforage",function(){return f}):u===r.EXPORT?module.exports=f:this.localforage=f}.call(window)})() });